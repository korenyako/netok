# План ручного тестирования Netok

## Введение

Этот документ содержит сценарии для ручного тестирования приложения Netok в различных условиях сети. Цель — убедиться, что приложение корректно определяет проблемы и показывает понятные сообщения пользователю.

**Когда использовать:**
- Перед релизом новой версии
- После изменений в модуле диагностики (`netok_core/src/diagnostics.rs`)
- При добавлении новых сообщений об ошибках

---

## Подготовка к тестированию

### Необходимо

- [ ] Приложение Netok запущено
- [ ] Права администратора (для изменения DNS)
- [ ] Доступ к роутеру (для некоторых сценариев)
- [ ] Возможность отойти от роутера (для теста слабого сигнала)

### Рекомендуется

- Тестировать на реальном железе (не в VM)
- Иметь мобильный интернет как резерв
- Записывать скриншоты результатов

---

## Чеклист тестирования

### Легенда статусов

| Статус | Значение |
|--------|----------|
| ✅ | Тест пройден |
| ❌ | Тест провален |
| ⚠️ | Частично работает |
| ⏳ | Не проверено |

---

### Сценарии ошибок

| # | Сценарий | Как воспроизвести (Windows) | Ожидаемое сообщение (RU) | Ожидаемое сообщение (EN) | Результат |
|---|----------|----------------------------|--------------------------|--------------------------|-----------|
| 1 | **Wi-Fi адаптер отключен** | Трей → значок сети → Wi-Fi → Выкл. Или: Диспетчер устройств → Сетевые адаптеры → ПКМ на Wi-Fi → Отключить | Адаптер Wi-Fi выключен. Включите Wi-Fi в настройках Windows. | Wi-Fi adapter is disabled. Turn on Wi-Fi in Windows settings. | ⏳ |
| 2 | **Wi-Fi включен, но не подключен** | Настройки → Сеть → Wi-Fi → текущая сеть → Забыть. Или: выключить роутер | Нет подключения к Wi-Fi. Выберите сеть и подключитесь. | Not connected to Wi-Fi. Select a network and connect. | ⏳ |
| 3 | **Подключен к Wi-Fi, роутер не отвечает** | Выключить роутер из розетки (Wi-Fi на ноутбуке останется "подключённым" несколько секунд) | Роутер не отвечает. Проверьте, включён ли роутер и горят ли на нём индикаторы. | Router is not responding. Check if your router is powered on and its lights are on. | ⏳ |
| 4 | **Роутер работает, нет интернета** | Выдернуть WAN-кабель (интернет-кабель) из роутера. Или: позвонить провайдеру и попросить временно отключить | Роутер работает, но интернет отсутствует. Проверьте кабель от провайдера или позвоните в поддержку. | Router is working, but there's no internet. Check the cable from your provider or contact support. | ⏳ |
| 5 | **DNS не работает** | Панель управления → Сеть → Свойства адаптера → IPv4 → Использовать DNS: `1.2.3.4` | Не удаётся найти адреса сайтов. Попробуйте сменить DNS на автоматический или используйте Cloudflare (1.1.1.1). | Cannot resolve website addresses. Try switching DNS to automatic or use Cloudflare (1.1.1.1). | ⏳ |
| 6 | **DNS работает, HTTP заблокирован** | Брандмауэр Windows → Правила исходящие → Заблокировать порты 80 и 443. Или: VPN с kill-switch → отключить VPN | Интернет частично работает. Сайты недоступны, но DNS отвечает. Проверьте настройки VPN или брандмауэра. | Internet is partially working. Websites are unavailable, but DNS responds. Check your VPN or firewall settings. | ⏳ |
| 7 | **Слабый Wi-Fi сигнал** | Уйти в дальнюю комнату / за несколько стен от роутера | Слабый сигнал Wi-Fi. Подойдите ближе к роутеру или проверьте, нет ли помех. | Weak Wi-Fi signal. Move closer to your router or check for interference. | ⏳ |
| 8 | **Всё работает нормально** | Обычное подключение к домашней сети | Интернет работает. | Internet is working. | ⏳ |

---

### Дополнительные сценарии (edge cases)

| # | Сценарий | Как воспроизвести | Ожидаемое поведение | Результат |
|---|----------|-------------------|---------------------|-----------|
| 9 | **Ethernet вместо Wi-Fi** | Подключить кабель напрямую к ноутбуку | Показывает "Ethernet" вместо "Wi-Fi", диагностика работает | ⏳ |
| 10 | **Несколько сетевых адаптеров** | VPN + Wi-Fi одновременно | Определяет активный адаптер, показывает корректный IP | ⏳ |
| 11 | **Очень медленный интернет** | Ограничить скорость через роутер (QoS) до 100 Кбит/с | Диагностика завершается (может дольше), показывает статус | ⏳ |
| 12 | **Публичный Wi-Fi с captive portal** | Подключиться к Wi-Fi в кафе/аэропорту без авторизации | Показывает что интернет недоступен, предлагает открыть страницу авторизации | ⏳ |

---

## Откат изменений после тестирования

### Вернуть DNS в автоматический режим

1. Панель управления → Центр управления сетями
2. Изменение параметров адаптера
3. ПКМ на активном адаптере → Свойства
4. IPv4 → Свойства
5. Выбрать "Получить адрес DNS-сервера автоматически"
6. OK → OK

### Включить Wi-Fi адаптер

1. Диспетчер устройств (Win+X → Диспетчер устройств)
2. Сетевые адаптеры
3. ПКМ на Wi-Fi адаптере → Включить устройство

### Разблокировать порты в брандмауэре

1. Брандмауэр Windows в режиме повышенной безопасности
2. Правила для исходящего подключения
3. Найти созданные тестовые правила → Удалить

### Включить роутер

1. Включить роутер в розетку
2. Подождать 1-2 минуты до полной загрузки
3. Подключить WAN-кабель если был отключён

---

## Шаблон отчёта о тестировании

```markdown
## Отчёт о тестировании

**Дата:** YYYY-MM-DD
**Версия:** X.Y.Z
**Тестировщик:** Имя
**ОС:** Windows 11 / 10

### Результаты

| Сценарий | Статус | Комментарий |
|----------|--------|-------------|
| 1. Wi-Fi адаптер отключен | ✅/❌/⚠️ | |
| 2. Wi-Fi не подключен | ✅/❌/⚠️ | |
| ... | | |

### Найденные проблемы

1. **[Критичность]** Описание проблемы
   - Шаги воспроизведения
   - Ожидаемое поведение
   - Фактическое поведение

### Общий вывод

[ ] Готово к релизу
[ ] Требуются исправления
```

---

## История тестирования

| Дата | Версия | Тестировщик | Пройдено | Провалено | Примечания |
|------|--------|-------------|----------|-----------|------------|
| — | — | — | — | — | Первый запуск тестирования |

---

## Связанные документы

- [CLAUDE.md](CLAUDE.md) — руководство для разработки
- [docs/UI-SPEC.md](docs/UI-SPEC.md) — спецификация UI
- [docs/IMPLEMENTATION-PLAN.md](docs/IMPLEMENTATION-PLAN.md) — план реализации
